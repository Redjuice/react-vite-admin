<template lang="pug">
layout-list
  {{!-- <!-- header slot --> --}}
  {{#if header}}
  template(#header)
    el-button(size="small" type="primary" @click="") 添加B
  {{/if}}
  {{!-- <!-- tabs slot --> --}}
  {{#if tabs}}
  template(#tabs)
    el-tabs(
      v-model="query.default1"
      @tab-click="handleClick"
    )
      el-tab-pane(
        v-for="item in [1,2,3]"
        label="User"
        name="first"
      )
  {{/if}}
  {{!-- <!-- search slot --> --}}
  {{#if search}}
  template(#search)
    el-date-picker(
      class='search-picker' 
      v-model="query.default2"
      type="datetimerange"
      value-format="timestamp"
      start-placeholder="开始时间"
      end-placeholder="结束时间"
      :default-time="['00:00:00', '23:59:59']"
      size="small"
      clearable)
    el-input(
      class='search-input'
      v-model.trim="query.default3" 
      placeholder="搜索文章标题"
      clearable
      prefix-icon="el-icon-search"
      size="small"
      maxlength="50")
    el-select(
      class="search-select"
      v-model="query.default4"
      filterable
      placeholder="请选择视频")
      el-option(
        v-for="item in [1,2,3]"
        :key="item.file_id"
        :label="item.video_name"
        :value="item.file_id")
    el-button(size="small" type="primary" @click="getData") 查询
    el-button(size="small"  @click="reset") 重置
  {{/if}}
  {{!-- <!-- default slot --> --}}
  template(#container)
    el-table.m-t-15(:data="list")
      el-table-column(label="表头" prop="name")
      el-table-column(label="操作" align="right")
        template(#default="scope")
      template(#empty)
        layout-empty(message="暂无数据")
    {{!-- <!-- footer slot --> --}}
  {{#if paging}}
  template(#footer)
    el-pagination(
      v-if="list.length"
      :current-page="meta.page"
      :page-sizes="meta.sizes"
      :page-size="meta.size"
      :total="meta.total"
      layout="total, sizes, prev, pager, next, jumper"
      @size-change="handleSizeChange"
      @current-change="handleCurrentChange")
  {{/if}}
</template>

{{#if script}}
<script>
import { reactive } from "vue";
{{#if paging}}
import Pagination from '@/mixins/Paging'; // 分页mixins
{{/if}}
import { useRouter } from 'vue-router';
import LayoutList from '@/components/Layout/LayoutList.vue';
import LayoutEmpty from '@/components/Layout/LayoutEmpty.vue';
let $router = null;
{{#if paging}}

const fetchList = async (query, page) => {
  let params = Object.assign(query, page);
  console.log(params);
};
{{/if}}
export default {
  name: '{{ properCase ename }}',
  components: {
    LayoutEmpty,
    LayoutList
  },
  setup() {
    $router = useRouter();
    let query = reactive({});
    let list = reactive([]);
    {{#if paging}}
    const pageMixins = Pagination(query, fetchList);
    {{/if}}
    return {
      query,
      list,
      {{#if paging}}
      ...pageMixins
      {{/if}}
    }
  }
}
</script>
{{/if}}

{{#if style}}
<style lang="less" scoped></style>
{{/if}}
